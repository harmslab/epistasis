__doc__ = """Test module for gpm module. Tests construction, initialization,
and functionality of the GenotypePhenotypeMap object.
"""

import os, json
from ..base import BaseModel

class BaseTestClass:

    def setUp(self):
        self.wildtype = "0000"
        self.mutations = {
            0:["0","1"],
            1:["0","1"],
            2:["0","1"],
            3:["0","1"],
        }

        self.genotypes = [
            "0000",
            "0001",
            "0010",
            "0100",
            "1000",
            "0011",
            "0101",
            "1001",
            "1010",
            "0110",
            "1100",
            "0111",
            "1011",
            "1101",
            "1110",
            "1111"
        ]

        self.phenotypes = [0.6066256962293493,
             0.8748096713027391,
             0.19046053044113964,
             0.534855845218745,
             0.6695554038866947,
             0.929539589901736,
             0.8848909082099686,
             0.3251115780903767,
             0.24202862815535942,
             0.651636522862296,
             0.8472853618967658,
             0.3999362990843036,
             0.80565708002967,
             0.9666303539782283,
             0.8492952396509037,
             0.9817442004154074
        ]

        self.stdeviations = [0.05994907788025117,
             0.04963510883466156,
             0.06298583130152453,
             0.0913617273803552,
             0.007753879912490758,
             0.02349555417619047,
             0.0028619238303159047,
             0.035440735778895775,
             0.06154774222548272,
             0.02866245195048375,
             0.04560950320492137,
             0.010470018038919594,
             0.03900764972129514,
             0.09967966228468184,
             0.06400095792825672,
             0.001794424268098327
        ]

        self.log_transform = True
        self.n_replicates = 3

        self.model = BaseModel(
            self.wildtype,
            self.genotypes,
            self.phenotypes,
            stdeviations=self.stdeviations,
            log_transform=self.log_transform,
            n_replicates=self.n_replicates,
            mutations=self.mutations
        )

    @classmethod
    def setup_class(cls):
        """Test fixtures, writes a dataset."""
        # Example json dataset
        data = {
            "wildtype" : "0000",
            "genotypes" : [
                "0000",
                "0001",
                "0010",
                "0100",
                "1000",
                "0011",
                "0101",
                "1001",
                "1010",
                "0110",
                "1100",
                "0111",
                "1011",
                "1101",
                "1110",
                "1111"
            ],
            "phenotypes" : [0.6066256962293493,
                 0.8748096713027391,
                 0.19046053044113964,
                 0.534855845218745,
                 0.6695554038866947,
                 0.929539589901736,
                 0.8848909082099686,
                 0.3251115780903767,
                 0.24202862815535942,
                 0.651636522862296,
                 0.8472853618967658,
                 0.3999362990843036,
                 0.80565708002967,
                 0.9666303539782283,
                 0.8492952396509037,
                 0.9817442004154074
            ],
            "stdeviations" : [0.05994907788025117,
                 0.04963510883466156,
                 0.06298583130152453,
                 0.0913617273803552,
                 0.007753879912490758,
                 0.02349555417619047,
                 0.0028619238303159047,
                 0.035440735778895775,
                 0.06154774222548272,
                 0.02866245195048375,
                 0.04560950320492137,
                 0.010470018038919594,
                 0.03900764972129514,
                 0.09967966228468184,
                 0.06400095792825672,
                 0.001794424268098327
            ],
            "log_transform" : True,
            "n_replicates" : 3,
            "mutations" : {
                0:["0","1"],
                1:["0","1"],
                2:["0","1"],
                3:["0","1"],
            }
        }
        with open("data.json", "w") as f:
            json.dump(data, f)

    @classmethod
    def teardown_class(cls):
        """"""
        os.remove("data.json")
